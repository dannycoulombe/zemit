"use strict";Zemit.app.run(["$rootScope","$zm","$history","$hook","$modal","$session",function($rs,$zm,$history,$hook,$modal,$session){$hook.add("onReady",function(){var settings=$session.get("settings");$rs.$zemit.on("keydown",function(event){var isInInput=angular.element(event.target).is("input")||angular.element(event.target).is("textarea")||angular.element(event.target).is("[contenteditable]"),resetFocus=function(){$rs.$zemit.find("[tabindex]:eq(0)").focus()};if(event.altKey||!isInInput)switch(event.which){case 8:event.metaKey&&($zm.action($zm.widget.removeAllSelected),$rs.$digest()),event.preventDefault();break;case 9:case 13:case 27:break;case 46:$zm.action($zm.widget.removeAllSelected),$rs.$digest(),event.preventDefault();break;case 68:(event.ctrlKey||event.metaKey)&&($zm.action($zm.widget.duplicate),$rs.$digest(),event.preventDefault());break;case 69:(event.ctrlKey||event.metaKey)&&($rs.$digest(),event.preventDefault());break;case 75:(event.ctrlKey||event.metaKey)&&($zm.content.clear(),$rs.$digest(),event.preventDefault());break;case 78:(event.ctrlKey||event.metaKey)&&($rs.$digest(),event.preventDefault());break;case 80:if(event.altKey){resetFocus();var oldContext=settings.context;settings.context="preview",$hook.run("onContextChange","preview",oldContext),$rs.$digest(),event.preventDefault()}break;case 83:if((event.ctrlKey||event.metaKey)&&(event.preventDefault(),$rs.$apply(),event.preventDefault()),event.altKey){resetFocus();var _oldContext=settings.context;settings.context="structure",$hook.run("onContextChange","structure",_oldContext),$rs.$digest(),event.preventDefault()}break;case 89:(event.ctrlKey||event.metaKey)&&(event.preventDefault(),$history.redo(),$rs.$apply(),event.preventDefault());break;case 90:(event.ctrlKey||event.metaKey)&&(event.preventDefault(),$history.undo(),$rs.$apply(),event.preventDefault());break;case 112:$modal.open("doc"),event.preventDefault()}})})}]);