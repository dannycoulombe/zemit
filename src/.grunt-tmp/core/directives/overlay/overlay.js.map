{"version":3,"sources":["overlay.js"],"names":["Zemit","app","directive","$timeout","restrict","replace","templateUrl","link","$s","$e","attrs","overlay","$element","visible","params","onShow","Function","$watch","nv","ov","setTimeout","remove","factory","$compile","scope","show","$overlay","angular","element","attr","parents","find","append","close","onClose","apply","onApply","cancel","onCancel"],"mappings":";;AAAA;;;;;AAKA,CAAC,YAAW;;AAEX;;;AAGAA,OAAMC,GAAN,CAAUC,SAAV,CAAoB,WAApB,EAAiC,CAAC,UAAD,EAAa,UAASC,QAAT,EAAmB;AAChE,SAAO;AACNC,aAAU,GADJ;AAENC,YAAS,IAFH;AAGNC,gBAAa,sCAHP;AAINC,SAAM,cAAUC,EAAV,EAAcC,EAAd,EAAkBC,KAAlB,EAAyB;;AAE9BF,OAAGF,WAAH,GAAiBI,MAAMJ,WAAvB;AACAE,OAAGG,OAAH,CAAWC,QAAX,GAAsBH,EAAtB;;AAEAN,aAAS,YAAW;AACnBK,QAAGG,OAAH,CAAWE,OAAX,GAAqB,IAArB;AACA,KAFD;;AAIA,QAAGL,GAAGG,OAAH,CAAWG,MAAX,CAAkBC,MAAlB,YAAoCC,QAAvC,EAAiD;AAChDR,QAAGG,OAAH,CAAWG,MAAX,CAAkBC,MAAlB,CAAyBN,EAAzB;AACA;;AAEDD,OAAGS,MAAH,CAAU,iBAAV,EAA6B,UAASC,EAAT,EAAaC,EAAb,EAAiB;AAC7C,SAAGD,OAAOC,EAAP,IAAaD,OAAO,KAAvB,EAA8B;AAC7BE,iBAAW,YAAW;AACrBX,UAAGY,MAAH;AACA,OAFD,EAEG,GAFH;AAGA;AACD,KAND;AAOA;AAxBK,GAAP;AA0BA,EA3BgC,CAAjC;;AA6BArB,OAAMC,GAAN,CAAUqB,OAAV,CAAkB,UAAlB,EAA8B,CAAC,UAAD,EAAa,UAASC,QAAT,EAAmB;;AAE7D,SAAO,UAASC,KAAT,EAAgBV,MAAhB,EAAwB;;AAE9B,OAAIQ,UAAU;;AAEbT,aAAS,KAFI;;AAIbY,UAAM,gBAAW;;AAEhB,SAAIC,WAAWC,QAAQC,OAAR,CAAgB,gBAAhB,CAAf;AACAF,cAASG,IAAT,CAAc,cAAd,EAA8B,KAAKf,MAAL,CAAYR,WAA1C;AACAoB,cAASG,IAAT,CAAc,SAAd,EAAyB,SAAzB;AACAN,cAASG,QAAT,EAAmB,KAAKF,KAAxB;;AAEA,UAAKA,KAAL,CAAWb,OAAX,GAAqB,IAArB;AACA,UAAKa,KAAL,CAAWZ,QAAX,CAAoBkB,OAApB,CAA4B,4BAA5B,EAA0DC,IAA1D,CAA+D,8BAA/D,EAA+FC,MAA/F,CAAsGN,QAAtG;;AAEA;AACA;AACA;AACA;AACA;AACA,KAnBY;;AAqBbO,WAAO,iBAAW;AACjB,UAAKpB,OAAL,GAAe,KAAf;;AAEA,SAAG,KAAKC,MAAL,CAAYoB,OAAZ,YAA+BlB,QAAlC,EAA4C;AAC3C,WAAKF,MAAL,CAAYoB,OAAZ,CAAoB,IAApB;AACA;AACD,KA3BY;;AA6BbC,WAAO,iBAAW;;AAEjB,UAAKF,KAAL;;AAEA,SAAG,KAAKnB,MAAL,CAAYsB,OAAZ,YAA+BpB,QAAlC,EAA4C;AAC3C,WAAKF,MAAL,CAAYsB,OAAZ,CAAoB,IAApB;AACA;AACD,KApCY;;AAsCbC,YAAQ,kBAAW;;AAElB,UAAKJ,KAAL;;AAEA,SAAG,KAAKnB,MAAL,CAAYwB,QAAZ,YAAgCtB,QAAnC,EAA6C;AAC5C,WAAKF,MAAL,CAAYwB,QAAZ,CAAqB,IAArB;AACA;AACD;AA7CY,IAAd;;AAgDAhB,WAAQE,KAAR,GAAgBA,KAAhB;AACAF,WAAQR,MAAR,GAAiBA,MAAjB;;AAEA,UAAOQ,OAAP;AACA,GAtDD;AAuDA,EAzD6B,CAA9B;AA0DA,CA5FD","file":"overlay.js","sourcesContent":["/**\n * Creates and overlay above your container that loads a custom template URL.\n * \n * @author <contact@dannycoulombe.com>\n */\n(function() {\n\t\n\t/**\n\t * General directives\n\t */\n\tZemit.app.directive('zmOverlay', ['$timeout', function($timeout) {\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\treplace: true,\n\t\t\ttemplateUrl: 'core/directives/overlay/overlay.html',\n\t\t\tlink: function ($s, $e, attrs) {\n\t\t\t\t\n\t\t\t\t$s.templateUrl = attrs.templateUrl;\n\t\t\t\t$s.overlay.$element = $e;\n\t\t\t\t\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$s.overlay.visible = true;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif($s.overlay.params.onShow instanceof Function) {\n\t\t\t\t\t$s.overlay.params.onShow($e);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$s.$watch('overlay.visible', function(nv, ov) {\n\t\t\t\t\tif(nv !== ov && nv === false) {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$e.remove();\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}]);\n\t\n\tZemit.app.factory('$overlay', ['$compile', function($compile) {\n\t\t\n\t\treturn function(scope, params) {\n\t\t\t\n\t\t\tvar factory = {\n\t\t\t\t\n\t\t\t\tvisible: false,\n\t\t\t\t\n\t\t\t\tshow: function() {\n\t\t\t\t\t\n\t\t\t\t\tvar $overlay = angular.element('<zm-overlay />');\n\t\t\t\t\t$overlay.attr('template-url', this.params.templateUrl);\n\t\t\t\t\t$overlay.attr('overlay', 'factory');\n\t\t\t\t\t$compile($overlay)(this.scope);\n\t\t\t\t\t\n\t\t\t\t\tthis.scope.overlay = this;\n\t\t\t\t\tthis.scope.$element.parents('.zm-widget-container:eq(0)').find('.zm-container-overlays:eq(0)').append($overlay);\n\t\t\t\t\t\n\t\t\t\t\t// if(this.params.onShow instanceof Function) {\n\t\t\t\t\t// \t$timeout(function() {\n\t\t\t\t\t// \t\tfactory.params.onShow(factory);\n\t\t\t\t\t// \t});\n\t\t\t\t\t// }\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tclose: function() {\n\t\t\t\t\tthis.visible = false;\n\t\t\t\t\t\n\t\t\t\t\tif(this.params.onClose instanceof Function) {\n\t\t\t\t\t\tthis.params.onClose(this);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tapply: function() {\n\t\t\t\t\t\n\t\t\t\t\tthis.close();\n\t\t\t\t\t\n\t\t\t\t\tif(this.params.onApply instanceof Function) {\n\t\t\t\t\t\tthis.params.onApply(this);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tcancel: function() {\n\t\t\t\t\t\n\t\t\t\t\tthis.close();\n\t\t\t\t\t\n\t\t\t\t\tif(this.params.onCancel instanceof Function) {\n\t\t\t\t\t\tthis.params.onCancel(this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tfactory.scope = scope;\n\t\t\tfactory.params = params;\n\t\t\t\n\t\t\treturn factory;\n\t\t};\n\t}]);\n})();"]}