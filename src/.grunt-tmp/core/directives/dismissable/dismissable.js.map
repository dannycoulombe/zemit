{"version":3,"sources":["dismissable.js"],"names":["Zemit","app","directive","$session","$modules","restrict","templateUrl","transclude","scope","type","list","link","$s","$e","attrs","settings","get","prepare","directives","dismissable","visible","locked","undefined","index","getIsVisible","$watch","nv","ov","isVisible","forEach","item","Object","assign","effectiveList","getEffectiveList","items","condition","push","length","next","getLabel","label","Function","close"],"mappings":";;AAAA;;;AAGA,CAAC,YAAW;;AAEXA,OAAMC,GAAN,CAAUC,SAAV,CAAoB,eAApB,EAAqC,CAAC,UAAD,EAAa,UAAb,EAAyB,UAASC,QAAT,EAAmBC,QAAnB,EAA6B;AAC1F,SAAO;AACNC,aAAU,GADJ;AAENC,gBAAa,8CAFP;AAGNC,eAAY,IAHN;AAINC,UAAO;AACNC,UAAM,IADA;AAENC,UAAM;AAFA,IAJD;AAQNC,SAAM,cAAUC,EAAV,EAAcC,EAAd,EAAkBC,KAAlB,EAAyB;;AAE9B,QAAIC,WAAWZ,SAASa,GAAT,CAAa,UAAb,CAAf;AACAb,aAASc,OAAT,CAAiB,UAAjB,EAA6B;AAC5BC,iBAAY;AACXC,mBAAa;AACZC,gBAAS;AADG;AADF;AADgB,KAA7B;;AAQAR,OAAGH,IAAH,GAAUK,MAAML,IAAhB;AACAG,OAAGS,MAAH,GAAYP,MAAMO,MAAN,KAAiBC,SAA7B;AACAV,OAAGW,KAAH,GAAW,CAAX;AACAX,OAAGY,YAAH,GAAkB,YAAM;AACvB,YAAOZ,GAAGS,MAAH,IAAaN,SAASG,UAAT,CAAoBC,WAApB,CAAgCC,OAApD;AACA,KAFD;AAGAR,OAAGa,MAAH,CAAU,yCAAV,EAAqD,UAACC,EAAD,EAAKC,EAAL,EAAY;AAChE,SAAGD,OAAOC,EAAV,EAAc;AACbf,SAAGgB,SAAH,GAAehB,GAAGY,YAAH,EAAf;AACA;AACD,KAJD;AAKAZ,OAAGgB,SAAH,GAAehB,GAAGY,YAAH,EAAf;;AAEA,QAAGZ,GAAGF,IAAN,EAAY;;AAEXE,QAAGF,IAAH,CAAQmB,OAAR,CAAgB,UAACC,IAAD,EAAU;AACzBC,aAAOC,MAAP,CAAcF,IAAd,EAAoB;AACnBrB,aAAM;AADa,OAApB;AAGA,MAJD;;AAMAG,QAAGqB,aAAH,GAAmB,EAAnB;AACArB,QAAGsB,gBAAH,GAAsB,YAAM;AAC3B,UAAIC,QAAQ,EAAZ;AACAvB,SAAGF,IAAH,CAAQmB,OAAR,CAAgB,UAACC,IAAD,EAAU;AACzB,WAAGA,KAAKM,SAAL,EAAH,EAAqB;AACpBD,cAAME,IAAN,CAAWP,IAAX;AACA;AACD,OAJD;AAKAlB,SAAGqB,aAAH,GAAmBE,KAAnB;;AAEA,UAAGvB,GAAGW,KAAH,IAAYX,GAAGqB,aAAH,CAAiBK,MAAhC,EAAwC;AACvC1B,UAAGW,KAAH,GAAWX,GAAGqB,aAAH,CAAiBK,MAAjB,GAA0B,CAArC;AACA;;AAED,UAAG1B,GAAGW,KAAH,GAAW,CAAd,EAAiB;AAChBX,UAAGW,KAAH,GAAW,CAAX;AACA;;AAED,aAAOY,KAAP;AACA,MAlBD;AAmBA;;AAEDvB,OAAG2B,IAAH,GAAU,YAAM;;AAEf3B,QAAGW,KAAH;AACA,SAAGX,GAAGW,KAAH,IAAYX,GAAGqB,aAAH,CAAiBK,MAAhC,EAAwC;AACvC1B,SAAGW,KAAH,GAAW,CAAX;AACA;AACD,KAND;;AAQAX,OAAG4B,QAAH,GAAc,UAACV,IAAD,EAAU;AACvB,SAAGA,KAAKW,KAAL,YAAsBC,QAAzB,EAAmC;AAClC,aAAOZ,KAAKW,KAAL,EAAP;AACA;;AAED,YAAOX,KAAKW,KAAZ;AACA,KAND;;AAQA7B,OAAG+B,KAAH,GAAW,YAAW;;AAErB5B,cAASG,UAAT,CAAoBC,WAApB,CAAgCC,OAAhC,GAA0C,KAA1C;AACA,KAHD;;AAKAR,OAAGG,QAAH,GAAcA,QAAd;AACA;AApFK,GAAP;AAsFA,EAvFoC,CAArC;AAwFA,CA1FD","file":"dismissable.js","sourcesContent":["/**\n * @author <contact@dannycoulombe.com>\n */\n(function() {\n\t\n\tZemit.app.directive(\"zmDismissable\", ['$session', '$modules', function($session, $modules) {\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: 'core/directives/dismissable/dismissable.html',\n\t\t\ttransclude: true,\n\t\t\tscope: {\n\t\t\t\ttype: '@?',\n\t\t\t\tlist: '=?'\n\t\t\t},\n\t\t\tlink: function ($s, $e, attrs) {\n\t\t\t\t\n\t\t\t\tvar settings = $session.get('settings');\n\t\t\t\t$session.prepare('settings', {\n\t\t\t\t\tdirectives: {\n\t\t\t\t\t\tdismissable: {\n\t\t\t\t\t\t\tvisible: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$s.type = attrs.type;\n\t\t\t\t$s.locked = attrs.locked !== undefined;\n\t\t\t\t$s.index = 0;\n\t\t\t\t$s.getIsVisible = () => {\n\t\t\t\t\treturn $s.locked || settings.directives.dismissable.visible;\n\t\t\t\t};\n\t\t\t\t$s.$watch('settings.directives.dismissable.visible', (nv, ov) => {\n\t\t\t\t\tif(nv !== ov) {\n\t\t\t\t\t\t$s.isVisible = $s.getIsVisible();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$s.isVisible = $s.getIsVisible();\n\t\t\t\t\n\t\t\t\tif($s.list) {\n\t\t\t\t\t\n\t\t\t\t\t$s.list.forEach((item) => {\n\t\t\t\t\t\tObject.assign(item, {\n\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t$s.effectiveList = [];\n\t\t\t\t\t$s.getEffectiveList = () => {\n\t\t\t\t\t\tlet items = [];\n\t\t\t\t\t\t$s.list.forEach((item) => {\n\t\t\t\t\t\t\tif(item.condition()) {\n\t\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$s.effectiveList = items;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif($s.index >= $s.effectiveList.length) {\n\t\t\t\t\t\t\t$s.index = $s.effectiveList.length - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif($s.index < 0) {\n\t\t\t\t\t\t\t$s.index = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn items;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$s.next = () => {\n\t\t\t\t\t\n\t\t\t\t\t$s.index++;\n\t\t\t\t\tif($s.index >= $s.effectiveList.length) {\n\t\t\t\t\t\t$s.index = 0;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$s.getLabel = (item) => {\n\t\t\t\t\tif(item.label instanceof Function) {\n\t\t\t\t\t\treturn item.label();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn item.label;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$s.close = function() {\n\t\t\t\t\t\n\t\t\t\t\tsettings.directives.dismissable.visible = false;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$s.settings = settings;\n\t\t\t}\n\t\t};\n\t}]);\n})();"]}