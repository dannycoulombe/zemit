{"version":3,"sources":["tabs.js"],"names":["Zemit","app","directive","$rs","$timeout","$compile","restrict","transclude","toggle","items","replace","scope","ngDisabled","templateUrl","link","$s","$e","attrs","ctrl","$list","find","tabs","visible","open","close","$broadcast","applyPosition","clickInside","style","anchor","split","y","x","clearAnchors","addClass","rect","getBoundingClientRect","right","window","innerWidth","left","bottom","innerHeight","top","anchors","forEach","removeClass","$watch","nv","ov","$on","event","$target","angular","element","target","is","closest","length","$digest"],"mappings":"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","file":"tabs.js","sourcesContent":["/**\n * @author <contact@dannycoulombe.com>\n */\n(function() {\n\t\n\t/**\n\t * Creates tabs\n\t */\n\tZemit.app.directive('zmTabs', ['$rootScope', '$timeout', '$compile', function($rs, $timeout, $compile) {\n\t\treturn {\n\t\t\trestrict: \"E\",\n\t\t\ttransclude: {\n\t\t\t\ttoggle: '?toggle',\n\t\t\t\titems: 'items'\n\t\t\t},\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tngDisabled: '='\n\t\t\t},\n\t\t\ttemplateUrl: 'core/directives/tabs/tabs.html',\n\t\t\tlink: function($s, $e, attrs, ctrl, transclude) {\n\t\t\t\t\n\t\t\t\tvar $list = $e.find('.zm-tabs-list');\n\t\t\t\t\n\t\t\t\tvar tabs = {\n\t\t\t\t\tvisible: false,\n\t\t\t\t\ttoggle: function() {\n\t\t\t\t\t\t!this.visible\n\t\t\t\t\t\t\t? this.open()\n\t\t\t\t\t\t\t: this.close();\n\t\t\t\t\t},\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t$rs.$broadcast('documentClick');\n\t\t\t\t\t\t\n\t\t\t\t\t\tapplyPosition();\n\t\t\t\t\t\tthis.visible = true;\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.visible = false;\n\t\t\t\t\t},\n\t\t\t\t\tclickInside: function() {\n\t\t\t\t\t\t$rs.$broadcast('documentClick');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$s.tabs = tabs;\n\t\t\t\t$s.style = attrs.style || 'button';\n\t\t\t\t\n\t\t\t\tvar applyPosition = () => {\n\t\t\t\t\t\n\t\t\t\t\tlet anchor = attrs.anchor ? attrs.anchor : 'top-left';\n\t\t\t\t\tlet [y, x] = attrs.anchor.split('-');\n\t\t\t\t\t\n\t\t\t\t\tclearAnchors();\n\t\t\t\t\t$e.addClass('zm-tabs-anchor-' + anchor);\n\t\t\t\t\t\n\t\t\t\t\tlet rect = $list[0].getBoundingClientRect();\n\t\t\t\t\t\n\t\t\t\t\tif(rect.right > window.innerWidth && rect.left > 0) {\n\t\t\t\t\t\tx = 'right';\n\t\t\t\t\t}\n\t\t\t\t\telse if(rect.left < 0) {\n\t\t\t\t\t\tx = 'left';\n\t\t\t\t\t}\n\t\t\t\t\telse if(x === 'right') {\n\t\t\t\t\t\t// Everything was fine, just skip the condition\n\t\t\t\t\t}\n\t\t\t\t\telse if(rect.left > 0 && rect.right < window.innerWidth) {\n\t\t\t\t\t\tx = 'left';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(rect.bottom > window.innerHeight && rect.top > 0) {\n\t\t\t\t\t\ty = 'bottom';\n\t\t\t\t\t}\n\t\t\t\t\telse if(rect.top < 0) {\n\t\t\t\t\t\ty = 'top';\n\t\t\t\t\t}\n\t\t\t\t\telse if(y === 'bottom') {\n\t\t\t\t\t\t// Everything was fine, just skip the condition\n\t\t\t\t\t}\n\t\t\t\t\telse if(rect.top > 0 && rect.bottom < window.innerHeight) {\n\t\t\t\t\t\ty = 'top';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tanchor = y + '-' + x;\n\t\t\t\t\t\n\t\t\t\t\tclearAnchors();\n\t\t\t\t\t$e.addClass('zm-tabs-anchor-' + anchor);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar clearAnchors = () => {\n\t\t\t\t\t\n\t\t\t\t\tlet anchors = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\n\t\t\t\t\tanchors.forEach(anchor => {\n\t\t\t\t\t\t$e.removeClass('zm-tabs-anchor-' + anchor);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$s.$watch('ngDisabled', (nv, ov) => {\n\t\t\t\t\tif(nv !== ov && nv) {\n\t\t\t\t\t\ttabs.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$s.$on('documentClick', (scope, event) => {\n\t\t\t\t\t\n\t\t\t\t\tif(!tabs.visible) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar $target = event && angular.element(event.target);\n\t\t\t\t\tif(!event || (!$target.is($e) && $target.closest($e).length === 0)) {\n\t\t\t\t\t\ttabs.close();\n\t\t\t\t\t\tevent && $s.$digest();\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}]);\n})();"]}