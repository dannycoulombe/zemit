{"version":3,"sources":["modal.js"],"names":["Zemit","app","factory","$compile","$rs","$util","$hook","$timeout","$i18n","windowResizeTimeout","add","clearTimeout","setTimeout","angular","forEach","instances","instance","modalScope","modal","adjustPosition","zIndex","getZIndex","dialog","id","params","extend","onClose","remove","create","then","open","info","title","get","content","backdrop","buttons","default","label","warning","error","ZmError","console","message","TypeError","stack","Promise","resolve","reject","runCreate","$modal","element","attr","s4","ready","fullScreen","addClass","$s","scope","$new","$modalHeader","html","append","$modalBody","directive","callback","appendTo","$zemit","$on","event","targetScope","bodyScope","$digest","catch","close"],"mappings":"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","file":"modal.js","sourcesContent":["/**\n * Modal: With this directive, you can instantiate modals containing anything\n * you need.\n * \n * @author <contact@dannycoulombe.com>\n */\n(function() {\n\t\n\tZemit.app.factory('$modal', ['$compile', '$rootScope', '$util', '$hook', '$timeout', '$i18n', function($compile, $rs, $util, $hook, $timeout, $i18n) {\n\t\t\n\t\tlet windowResizeTimeout;\n\t\t$hook.add('onWindowResize', () => {\n\t\t\tclearTimeout(windowResizeTimeout);\n\t\t\twindowResizeTimeout = setTimeout(() => {\n\t\t\t\tangular.forEach(factory.instances, (instance) => {\n\t\t\t\t\tinstance.modalScope.modal.adjustPosition(false, false);\n\t\t\t\t});\n\t\t\t}, 500);\n\t\t});\n\t\t\n\t\tvar factory = {\n\t\t\t\n\t\t\tzIndex: 10000,\n\t\t\tinstances: {},\n\t\t\t\n\t\t\tgetZIndex: function() {\n\t\t\t\t\n\t\t\t\tthis.zIndex++;\n\t\t\t\treturn this.zIndex;\n\t\t\t},\n\t\t\t\n\t\t\tdialog: function(id, params = {}) {\n\t\t\t\t\n\t\t\t\tparams = angular.extend(params, {\n\t\t\t\t\tonClose: (modal) => {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tmodal.remove();\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn this.create(id, params).then((instance) => {\n\t\t\t\t\tfactory.open(id);\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\tinfo: function(params = {}) {\n\t\t\t\t\n\t\t\t\tif(typeof params === 'string') {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\ttitle: $i18n.get('core.di.modal.infoTitle'),\n\t\t\t\t\t\tcontent: params\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparams = angular.extend({\n\t\t\t\t\tbackdrop: true,\n\t\t\t\t\tonClose: function(modal) {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tmodal.remove();\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t},\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t\tlabel: $i18n.get('core.di.modal.btnOk')\n\t\t\t\t\t}]\n\t\t\t\t}, params);\n\t\t\t\t\n\t\t\t\treturn this.create('info', params).then((instance) => {\n\t\t\t\t\tfactory.open('info');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\twarning: function(params = {}) {\n\t\t\t\t\n\t\t\t\tif(typeof params === 'string') {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\ttitle: $i18n.get('core.di.modal.warningTitle'),\n\t\t\t\t\t\tcontent: params\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparams = angular.extend({\n\t\t\t\t\tbackdrop: true,\n\t\t\t\t\tonClose: function(modal) {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tmodal.remove();\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t},\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t\tlabel: $i18n.get('core.di.modal.btnOk')\n\t\t\t\t\t}]\n\t\t\t\t}, params);\n\t\t\t\t\n\t\t\t\treturn this.create('warning', params).then((instance) => {\n\t\t\t\t\tfactory.open('warning');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\terror: function(params = {}) {\n\t\t\t\t\n\t\t\t\tif(params instanceof ZmError) {\n\t\t\t\t\tconsole.error(params);\n\t\t\t\t\tparams = {\n\t\t\t\t\t\ttitle: $i18n.get('core.di.modal.errorTitle'),\n\t\t\t\t\t\tcontent: params.message\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if(params instanceof TypeError) {\n\t\t\t\t\tconsole.error(params);\n\t\t\t\t\tparams = {\n\t\t\t\t\t\ttitle: $i18n.get('core.di.modal.errorTitle'),\n\t\t\t\t\t\tcontent: '<pre>' + params.stack + '</pre>'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof params === 'string') {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\ttitle: $i18n.get('core.di.modal.errorTitle'),\n\t\t\t\t\t\tcontent: params\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparams = angular.extend({\n\t\t\t\t\tbackdrop: true,\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t\tlabel: $i18n.get('core.di.modal.btnOk')\n\t\t\t\t\t}],\n\t\t\t\t\tonClose: function(modal) {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tmodal.remove();\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t}\n\t\t\t\t}, params);\n\t\t\t\t\n\t\t\t\treturn this.create('error', params).then((instance) => {\n\t\t\t\t\tfactory.open('error');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * Create a new modal instance\n\t\t\t */\n\t\t\tcreate: function(id, params = {}) {\n\t\t\t\t\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\n\t\t\t\t\tlet runCreate = () => {\n\t\t\t\t\t\tvar $modal = angular.element('<zm-modal params=\"params\" />');\n\t\t\t\t\t\t$modal.attr('id', 'zm_modal_' + id || $util.s4());\n\t\t\t\t\t\t\n\t\t\t\t\t\tfactory.instances[id] = {\n\t\t\t\t\t\t\tparams: angular.extend({\n\t\t\t\t\t\t\t\tready: false\n\t\t\t\t\t\t\t}, params)\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(params.fullScreen) {\n\t\t\t\t\t\t\t$modal.addClass('zm-fullscreen');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar $s = (params.scope && params.scope.$new()) || $rs.$new();\n\t\t\t\t\t\t$s.params = params;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(params.title) {\n\t\t\t\t\t\t\tvar $modalHeader = angular.element('<modal-header />');\n\t\t\t\t\t\t\t$modalHeader.html(params.title);\n\t\t\t\t\t\t\t$modal.append($modalHeader);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$compile($modalHeader)($s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(params.content) {\n\t\t\t\t\t\t\tvar $modalBody = angular.element('<modal-body />');\n\t\t\t\t\t\t\t$modalBody.html(params.content);\n\t\t\t\t\t\t\t$modal.append($modalBody);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(params.directive) {\n\t\t\t\t\t\t\tvar $modalBody = angular.element('<modal-body />');\n\t\t\t\t\t\t\t$modalBody.html('<' + params.directive + ' />');\n\t\t\t\t\t\t\t$modal.append($modalBody);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar callback = () => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar element = $compile($modal)($s);\n\t\t\t\t\t\t\telement.appendTo($s.$zemit);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$s.$on('initModal' + id, (event) => {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tfactory.instances[id].modalScope = event.targetScope;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(params.directive) {\n\t\t\t\t\t\t\t\t\t$s.$on('modalBodyReady', (event, bodyScope) => {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tfactory.instances[id].modalScope.modal.bodyScope = bodyScope;\n\t\t\t\t\t\t\t\t\t\tresolve(factory.instances[id]);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tresolve(factory.instances[id]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t$s.$zemit ? callback() : $hook.add('onReady', callback);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\trunCreate();\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * Open an existing modal instance\n\t\t\t */\n\t\t\topen: function(id, params = {}) {\n\t\t\t\t\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthis.get(id).then((instance) => {\n\t\t\t\t\t\tinstance.modalScope.modal.open(params);\n\t\t\t\t\t\tinstance.modalScope.$digest();\n\t\t\t\t\t\tresolve(instance);\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\tclose: function(id) {\n\t\t\t\t\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthis.get(id).then((instance) => {\n\t\t\t\t\t\tinstance.modalScope.modal.close();\n\t\t\t\t\t\tinstance.modalScope.$digest();\n\t\t\t\t\t\tresolve(instance);\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\tget: function(id) {\n\t\t\t\t\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\n\t\t\t\t\tif(!factory.instances[id]) {\n\t\t\t\t\t\tthrow new ZmError(404, $i18n.get('core.di.modal.errNotFound', { id: id }));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve(factory.instances[id]);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn factory;\n\t}]);\n})();"]}