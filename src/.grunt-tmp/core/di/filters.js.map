{"version":3,"sources":["filters.js"],"names":["Zemit","app","filter","uri","decodeURI","date","format","Date","formattedDate","YYYY","indexOf","MM","DD","HH","hh","mm","ss","ms","replace","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","items","reverse","data","keys","query","strict","Array","keywords","trim","toLowerCase","split","searchFor","item","depth","results","angular","forEach","model","mKey","found","keywordsLoop","z","length","keysLoop","y","Function","keyResult","Object","childs","push","value","hasOwnProperty","allEquals","every","index","array","$sce","trustAs","JSON","stringify","amount","arr","idx","i"],"mappings":"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","file":"filters.js","sourcesContent":["/**\n * @author <contact@dannycoulombe.com>\n */\n(function() {\n\n\t/**\n\t * General directives\n\t */\n\tZemit.app.filter('decodeURI', function() {\n\t\treturn function(uri) {\n\t\t\treturn decodeURI(uri);\n\t\t}\n\t});\n\t\n\t/**\n\t * Format date\n\t */\n\tZemit.app.filter('date', function() {\n\t\treturn function(date, format) {\n\t\t\t\n\t\t\tif(typeof date === 'string') {\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\t\t\t\n\t\t\tlet formattedDate = format;\n\t\t\t\n\t\t\tlet YYYY = format.indexOf('YYYY');\n\t\t\tlet MM = format.indexOf('MM');\n\t\t\tlet DD = format.indexOf('DD');\n\t\t\tlet HH = format.indexOf('HH');\n\t\t\tlet hh = format.indexOf('hh');\n\t\t\tlet mm = format.indexOf('mm');\n\t\t\tlet ss = format.indexOf('ss');\n\t\t\tlet ms = format.indexOf('ms');\n\t\t\t\n\t\t\tif(YYYY !== -1) {\n\t\t\t\tformattedDate = formattedDate.replace('YYYY', date.getFullYear());\n\t\t\t}\n\t\t\tif(MM !== -1) {\n\t\t\t\tlet month = date.getMonth() + 1;\n\t\t\t\tmonth = month < 10 ? '0' + month : month;\n\t\t\t\tformattedDate = formattedDate.replace('MM', month);\n\t\t\t}\n\t\t\tif(DD !== -1) {\n\t\t\t\tlet day = date.getDate();\n\t\t\t\tday = day < 10 ? '0' + day : day;\n\t\t\t\tformattedDate = formattedDate.replace('DD', day);\n\t\t\t}\n\t\t\tif(HH !== -1) {\n\t\t\t\tlet hours = date.getHours();\n\t\t\t\thours = hours < 10 ? '0' + hours : hours;\n\t\t\t\tformattedDate = formattedDate.replace('HH', hours);\n\t\t\t}\n\t\t\tif(mm !== -1) {\n\t\t\t\tlet minutes = date.getMinutes();\n\t\t\t\tminutes = minutes < 10 ? '0' + minutes : minutes;\n\t\t\t\tformattedDate = formattedDate.replace('mm', minutes);\n\t\t\t}\n\t\t\tif(ss !== -1) {\n\t\t\t\tlet seconds = date.getSeconds();\n\t\t\t\tseconds = seconds < 10 ? '0' + seconds : seconds;\n\t\t\t\tformattedDate = formattedDate.replace('ss', seconds);\n\t\t\t}\n\t\t\tif(ms !== -1) {\n\t\t\t\tlet milliseconds = date.getMilliseconds();\n\t\t\t\tmilliseconds = milliseconds < 10\n\t\t\t\t\t? '00' + milliseconds\n\t\t\t\t\t: milliseconds < 100\n\t\t\t\t\t\t? '0' + milliseconds\n\t\t\t\t\t\t: milliseconds;\n\t\t\t\t\n\t\t\t\tformattedDate = formattedDate.replace('ms', milliseconds);\n\t\t\t}\n\t\t\t\n\t\t\treturn formattedDate;\n\t\t}\n\t});\n\t\n\t/**\n\t * Reverse array\n\t */\n\tZemit.app.filter('reverse', function() {\n\t\treturn function(items) {\n\t\t\treturn items.reverse();\n\t\t}\n\t});\n\t\n\t/**\n\t * Search in array\n\t */\n\tZemit.app.filter('search', function() {\n\t\treturn function(data, keys, query, strict = false) {\n\t\t\t\n\t\t\tif(!(keys instanceof Array)) {\n\t\t\t\tkeys = [keys];\n\t\t\t}\n\t\t\t\n\t\t\tif(!query) {\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\t\n\t\t\t// Convert the query in a clean array of keywords\n\t\t\tvar keywords = query.trim().replace(/\\s+/g,' ').replace(/^\\s+|\\s+$/,'').toLowerCase().split(' ');\n\t\t\t\n\t\t\tvar searchFor = (item, depth = 0) => {\n\t\t\t\t\n\t\t\t\tvar results = [];\n\t\t\t\t\n\t\t\t\tangular.forEach(item, function(model, mKey) {\n\t\t\t\t\t\n\t\t\t\t\tvar found = [];\n\t\t\t\t\t\n\t\t\t\t\t// Loop through all the keywords/keys\n\t\t\t\t\tkeywordsLoop: for(var z = 0; z < keywords.length; z++) {\n\t\t\t\t\t\tkeysLoop: for(var y = 0; y < keys.length; y++) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(keys[y] instanceof Function) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet keyResult = keys[y](model, depth);\n\t\t\t\t\t\t\t\tif(typeof keyResult === 'string') {\n\t\t\t\t\t\t\t\t\tfound[z] = keyResult.toLowerCase().trim().indexOf(keywords[z]) !== -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(keyResult instanceof Object && keyResult.childs instanceof Array) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet childs = searchFor(keyResult.childs, depth + 1);\n\t\t\t\t\t\t\t\t\tif(childs.length > 0) {\n\t\t\t\t\t\t\t\t\t\treturn results.push(model);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tfound[z] = keyResult.value.toLowerCase().trim().indexOf(keywords[z]) !== -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfound[z] = (model.hasOwnProperty(keys[y])\n\t\t\t\t\t\t\t\t\t&& model[keys[y]].toLowerCase().trim().indexOf(keywords[z]) !== -1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(found[z] && strict) {\n\t\t\t\t\t\t\t\tbreak keysLoop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(found[z] && !strict) {\n\t\t\t\t\t\t\t\tbreak keywordsLoop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Verify if all items are of the same value\n\t\t\t\t\tvar allEquals = found.every(function(value, index, array){\n\t\t\t\t\t\treturn value === array[0];\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// If all true\n\t\t\t\t\tif(allEquals && found[0]) {\n\t\t\t\t\t\tresults.push(model);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn results;\n\t\t\t};\n\t\t\t\n\t\t\tresults = searchFor(data);\n\t\t\t\n\t\t\treturn results;\n\t\t}\n\t});\n\t\n\tZemit.app.filter('trustHtml', ['$sce', function($sce) {\n\t\treturn function(value) {\n\t\t\treturn $sce.trustAs('html', value);\n\t\t}\n\t}]);\n\t\n\tZemit.app.filter('stringify', function() {\n\t\treturn function(data) {\n\t\t\treturn JSON.stringify(data);\n\t\t}\n\t});\n\n\t/**\n\t * Group array items into rows/columns\n\t */\n\tZemit.app.filter('columnize', function() {\n\t\treturn function(items, amount) {\n\t\t\t\n\t\t\tvar arr = [];\n\t\t\tvar idx = 0;\n\t\t\tfor (var i = 0; i < (items || []).length; i++) {\n\t\t\t\t\n\t\t\t\tif(i % amount === 0 && i > 0) {\n\t\t\t\t\tidx++;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tarr[idx] = arr[idx] || [];\n\t\t\t\tarr[idx].push(items[i]);\n\t\t\t}\n\t\t\treturn arr;\n\t\t}\n\t});\n})();"]}