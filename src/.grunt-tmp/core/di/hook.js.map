{"version":3,"sources":["hook.js"],"names":["Zemit","app","factory","structure","list","ranList","$new","angular","copy","defaultStructure","add","name","callback","uniqId","priority","vm","forEach","n","push","run","params","hooks","sort","a","b","hook","indexOf","hasRan","exists","id","result","every","item","key","remove","splice"],"mappings":";;AAAA;;;;;;AAMA,CAAC,YAAW;AACXA,OAAMC,GAAN,CAAUC,OAAV,CAAkB,OAAlB,EAA2B,CAAC,YAAW;;AAEtC,MAAIC,YAAY;;AAEfC,SAAM,EAFS;AAGfC,YAAS,EAHM;;AAKfC,SAAM,gBAAW;AAChB,WAAOC,QAAQC,IAAR,CAAaC,gBAAb,CAAP;AACA,IAPc;;AASfC,QAAK,aAASC,IAAT,EAAeC,QAAf,EAAsD;AAAA,QAA7BC,MAA6B,uEAApB,IAAoB;AAAA,QAAdC,QAAc,uEAAH,CAAG;;;AAE1D,QAAIC,KAAK,IAAT;;AAEA,QAAG,OAAOJ,IAAP,KAAgB,QAAnB,EAA6B;AAC5BA,YAAO,CAACA,IAAD,CAAP;AACA;;AAEDA,SAAKK,OAAL,CAAa,UAASC,CAAT,EAAY;AACxB,SAAG,CAACF,GAAGX,IAAH,CAAQa,CAAR,CAAJ,EAAgB;AACfF,SAAGX,IAAH,CAAQa,CAAR,IAAa,EAAb;AACA;AACDF,QAAGX,IAAH,CAAQa,CAAR,EAAWC,IAAX,CAAgB;AACfL,cAAQA,MADO;AAEfD,gBAAUA,QAFK;AAGfE,gBAAUA;AAHK,MAAhB;AAKA,KATD;AAUA,IA3Bc;;AA6BfK,QAAK,aAASR,IAAT,EAA0B;AAAA,sCAARS,MAAQ;AAARA,WAAQ;AAAA;;AAE9B,QAAIL,KAAK,IAAT;AACA,QAAIM,QAAQN,GAAGX,IAAH,CAAQO,IAAR,CAAZ;AACA,QAAGU,KAAH,EAAU;;AAET;AACAA,WAAMC,IAAN,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACtB,aAAOD,EAAET,QAAF,GAAaS,EAAET,QAAtB;AACH,MAFD;;AAIAP,aAAQS,OAAR,CAAgBK,KAAhB,EAAuB,UAASI,IAAT,EAAe;AACrCA,WAAKb,QAAL,aAAiBQ,MAAjB;AACA,MAFD;AAGA;;AAED,QAAG,KAAKf,OAAL,CAAaqB,OAAb,CAAqBf,IAArB,MAA+B,CAAC,CAAnC,EAAsC;AACrC,UAAKN,OAAL,CAAaa,IAAb,CAAkBP,IAAlB;AACA;AACD,IAhDc;;AAkDfgB,WAAQ,gBAAShB,IAAT,EAAe;AACtB,WAAO,KAAKN,OAAL,CAAaqB,OAAb,CAAqBf,IAArB,MAA+B,CAAC,CAAvC;AACA,IApDc;;AAsDfiB,WAAQ,gBAASjB,IAAT,EAAekB,EAAf,EAAmB;;AAE1B,QAAIC,SAAS,KAAb;AACA,KAAC,KAAK1B,IAAL,CAAUO,IAAV,KAAmB,EAApB,EAAwBoB,KAAxB,CAA8B,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC5C,SAAGD,KAAKnB,MAAL,KAAgBgB,EAAnB,EAAuB;AACtBC,eAAS,IAAT;AACA,aAAO,KAAP;AACA;AACD,KALD;AAMA,WAAOA,MAAP;AACA,IAhEc;;AAkEfI,WAAQ,gBAASvB,IAAT,EAAekB,EAAf,EAAmB;AAAA;;AAE1B,KAAC,KAAKzB,IAAL,CAAUO,IAAV,KAAmB,EAApB,EAAwBoB,KAAxB,CAA8B,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC5C,SAAGD,KAAKnB,MAAL,KAAgBgB,EAAnB,EAAuB;AACtB,YAAKzB,IAAL,CAAU+B,MAAV,CAAiBF,GAAjB,EAAsB,CAAtB;AACA,aAAO,KAAP;AACA;AACD,KALD;AAMA;AA1Ec,GAAhB;;AA6EA,MAAIxB,mBAAmBF,QAAQC,IAAR,CAAaL,SAAb,CAAvB;;AAEA,SAAOA,SAAP;AACA,EAlF0B,CAA3B;AAmFA,CApFD","file":"hook.js","sourcesContent":["/**\n * Zemit Hooks\n * @author: <contact@dannycoulombe.com>\n * \n * Get and set hooks\n */\n(function() {\n\tZemit.app.factory('$hook', [function() {\n\t\t\n\t\tvar structure = {\n\t\t\t\n\t\t\tlist: {},\n\t\t\tranList: [],\n\t\t\t\n\t\t\t$new: function() {\n\t\t\t\treturn angular.copy(defaultStructure);\n\t\t\t},\n\t\t\t\n\t\t\tadd: function(name, callback, uniqId = null, priority = 0) {\n\t\t\t\t\n\t\t\t\tvar vm = this;\n\t\t\t\t\n\t\t\t\tif(typeof name === 'string') {\n\t\t\t\t\tname = [name];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tname.forEach(function(n) {\n\t\t\t\t\tif(!vm.list[n]) {\n\t\t\t\t\t\tvm.list[n] = [];\n\t\t\t\t\t}\n\t\t\t\t\tvm.list[n].push({\n\t\t\t\t\t\tuniqId: uniqId,\n\t\t\t\t\t\tcallback: callback,\n\t\t\t\t\t\tpriority: priority\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\trun: function(name, ...params) {\n\t\t\t\t\n\t\t\t\tvar vm = this;\n\t\t\t\tvar hooks = vm.list[name];\n\t\t\t\tif(hooks) {\n\t\t\t\t\t\n\t\t\t\t\t// Sort by priority\n\t\t\t\t\thooks.sort(function(a, b) {\n\t\t\t\t\t    return a.priority - a.priority;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tangular.forEach(hooks, function(hook) {\n\t\t\t\t\t\thook.callback(...params);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.ranList.indexOf(name) === -1) {\n\t\t\t\t\tthis.ranList.push(name);\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\thasRan: function(name) {\n\t\t\t\treturn this.ranList.indexOf(name) !== -1;\n\t\t\t},\n\t\t\t\n\t\t\texists: function(name, id) {\n\t\t\t\t\n\t\t\t\tvar result = false;\n\t\t\t\t(this.list[name] || []).every((item, key) => {\n\t\t\t\t\tif(item.uniqId === id) {\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t\n\t\t\tremove: function(name, id) {\n\t\t\t\t\n\t\t\t\t(this.list[name] || []).every((item, key) => {\n\t\t\t\t\tif(item.uniqId === id) {\n\t\t\t\t\t\tthis.list.splice(key, 1);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tvar defaultStructure = angular.copy(structure);\n\t\t\n\t\treturn structure;\n\t}]);\n})();"]}