{"version":3,"sources":["debug.js"],"names":["Zemit","app","factory","$session","$hook","settings","get","prepare","debug","activated","log","recent","showWidgetTokenId","maxLog","vm","data","namespaces","structure","actions","init","namespace","label","item","active","find","push","getActiveNamespaces","results","forEach","indexOf","name","value","datetime","Date","toString","length","splice","console","run","clearLogs","addAction","title","callback","warning"],"mappings":"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","file":"debug.js","sourcesContent":["/**\n * Zemit Debug\n * @author: <contact@dannycoulombe.com>\n */\n(function() {\n\tZemit.app.factory('$debug', ['$session', '$hook', function($session, $hook) {\n\t\t\n\t\tvar settings = $session.get('settings');\n\t\t$session.prepare('settings', {\n\t\t\tdebug: {\n\t\t\t\tactivated: false,\n\t\t\t\tlog: [],\n\t\t\t\trecent: [],\n\t\t\t\tsettings: {\n\t\t\t\t\tshowWidgetTokenId: false,\n\t\t\t\t\tmaxLog: 250\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar vm = {\n\t\t\t\n\t\t\tdata: [],\n\t\t\trecent: [],\n\t\t\tnamespaces: [],\n\t\t\tstructure: {},\n\t\t\tactions: [],\n\t\t\tsettings: {\n\t\t\t\tmaxLog: 250\n\t\t\t},\n\t\t\t\n\t\t\tinit: function(namespace, label) {\n\t\t\t\t\n\t\t\t\t// if(!settings) {\n\t\t\t\t// \tsettings = $session.get('settings');\n\t\t\t\t// }\n\t\t\t\t\n\t\t\t\tlet structure = settings.debug.log || [];\n\t\t\t\tlet item = {\n\t\t\t\t\tnamespace: namespace,\n\t\t\t\t\tactive: false,\n\t\t\t\t\tlabel: label\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(!settings.debug.log.find((item) => item.namespace === namespace)) {\n\t\t\t\t\tstructure.push(item);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$session.prepare('settings', {\n\t\t\t\t\tdebug: {\n\t\t\t\t\t\tlog: structure\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.namespaces.push(namespace);\n\t\t\t\t\n\t\t\t\tthis.data = settings.debug.log;\n\t\t\t\tthis.recent = settings.debug.recent;\n\t\t\t\tthis.settings = settings.debug.settings;\n\t\t\t},\n\t\t\t\n\t\t\tgetActiveNamespaces: function(namespace) {\n\t\t\t\t\n\t\t\t\tlet results = [];\n\t\t\t\tthis.data.forEach(item => {\n\t\t\t\t\tif(this.namespaces.indexOf(item.namespace) !== -1) {\n\t\t\t\t\t\tresults.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn results;\n\t\t\t},\n\t\t\t\n\t\t\tlog: function(namespace, name, value = null) {\n\t\t\t\t\n\t\t\t\tlet log = this.data.find((item) => item.namespace === namespace);\n\t\t\t\t\n\t\t\t\tif(settings.debug.activated && log && log.active) {\n\t\t\t\t\t\n\t\t\t\t\tlet log = {\n\t\t\t\t\t\tdatetime: new Date(),\n\t\t\t\t\t\tnamespace: namespace,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: (value || '').toString()\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tthis.recent.push(log);\n\t\t\t\t\t\n\t\t\t\t\twhile(this.recent.length > this.settings.maxLog) {\n\t\t\t\t\t\tthis.recent.splice(0, 1);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(namespace, name, value);\n\t\t\t\t\t\n\t\t\t\t\t$hook.run('onDebugLog', log);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tclearLogs: function() {\n\t\t\t\t\n\t\t\t\tthis.recent = [];\n\t\t\t\tsettings.debug.recent = [];\n\t\t\t},\n\t\t\t\n\t\t\taddAction: function(title, callback, warning = false) {\n\t\t\t\t\n\t\t\t\tthis.actions.push({\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tcallback: callback,\n\t\t\t\t\twarning: warning\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn vm;\n\t}]);\n})();"]}