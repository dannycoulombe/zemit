{"version":3,"sources":["device.js"],"names":["Zemit","app","factory","$hook","$rs","timeout","add","clearTimeout","setTimeout","$apply","_isMac","_isTouch","_isPrecise","_isSupported","_browser","_supportsGrid","_supportsFlexbox","supportedVersion","edge","chrome","firefox","opera","safari","getBestLang","window","navigator","userLanguage","language","vibrate","delay","isSmall","innerWidth","isLargeEnough","isTouch","matchMedia","matches","isPrecise","isStandalone","standalone","location","search","indexOf","isMac","userAgent","getBrowser","ua","tem","M","match","test","exec","name","version","replace","toLowerCase","appName","appVersion","splice","isSupported","supportsFlexbox","supportsGrid","browser","el","document","createElement","style","grid","display"],"mappings":"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","file":"device.js","sourcesContent":["/**\n * Zemit Device\n * @author: <contact@dannycoulombe.com>\n */\n(function() {\n\tZemit.app.factory('$device', ['$hook', '$rootScope', function($hook, $rs) {\n\t\t\n\t\tlet timeout;\n\t\t$hook.add('onWindowResize', () => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t$rs.$apply();\n\t\t\t}, 500);\n\t\t});\n\t\t\n\t\tvar factory = {\n\t\t\t\n\t\t\t_isMac: null,\n\t\t\t_isTouch: null,\n\t\t\t_isPrecise: null,\n\t\t\t_isSupported: null,\n\t\t\t_browser: null,\n\t\t\t_supportsGrid: null,\n\t\t\t_supportsFlexbox: null,\n\t\t\t\n\t\t\tsupportedVersion: {\n\t\t\t\tedge: 16,\n\t\t\t\tchrome: 57,\n\t\t\t\tfirefox: 52,\n\t\t\t\topera: 44,\n\t\t\t\tsafari: 11\n\t\t\t},\n\t\t\t\n\t\t\tgetBestLang: function() {\n\t\t\t\t\n\t\t\t\treturn window.navigator.userLanguage || window.navigator.language;\n\t\t\t},\n\t\t\t\n\t\t\tvibrate: function(delay = 100) {\n\t\t\t\t\n\t\t\t\tif(navigator.vibrate) {\n\t\t\t\t\tnavigator.vibrate(delay);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tisSmall: function() {\n\t\t\t\treturn window.innerWidth < 767;\n\t\t\t},\n\t\t\t\n\t\t\tisLargeEnough: function() {\n\t\t\t\treturn window.innerWidth > 991;\n\t\t\t},\n\t\t\t\n\t\t\tisTouch: function() {\n\t\t\t\treturn window.matchMedia('(pointer: coarse)').matches;\n\t\t\t},\n\t\t\t\n\t\t\tisPrecise: function() {\n\t\t\t\treturn window.matchMedia('(pointer: fine)').matches;\n\t\t\t},\n\t\t\t\n\t\t\tisStandalone: function() {\n\t\t\t\treturn window.matchMedia('(display-mode: standalone)').matches\n\t\t\t\t\t|| window.navigator.standalone\n\t\t\t\t\t|| window.location.search.indexOf('standalone=1') !== -1;\n\t\t\t},\n\t\t\t\n\t\t\tisMac: function() {\n\t\t\t\t\n\t\t\t\tif(this._isMac !== null) {\n\t\t\t\t\treturn this._isMac;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet isMac = navigator.userAgent.indexOf('Macintosh') !== -1;\n\t\t\t\tthis._isMac = isMac;\n\t\t\t\treturn isMac;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * https://stackoverflow.com/a/38080051/538323\n\t\t\t */\n\t\t\tgetBrowser: function() {\n\t\t\t\t\n\t\t\t\tvar ua = navigator.userAgent,\n\t\t\t\t\ttem,\n\t\t\t\t\tM = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n\t\t\t\tif (/trident/i.test(M[1])) {\n\t\t\t\t\ttem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n\t\t\t\t\treturn { name: 'ie', version: (tem[1] || '') };\n\t\t\t\t}\n\t\t\t\tif (M[1] === 'Chrome') {\n\t\t\t\t\ttem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\n\t\t\t\t\tif (tem != null) return { name: tem[1].replace('OPR', 'opera').toLowerCase(), version: tem[2] };\n\t\t\t\t}\n\t\t\t\tM = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n\t\t\t\tif ((tem = ua.match(/version\\/(\\d+)/i)) != null) M.splice(1, 1, tem[1]);\n\t\t\t\treturn {\n\t\t\t\t\tname: M[0].toLowerCase(),\n\t\t\t\t\tversion: M[1].toLowerCase()\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tname: 'unknown',\n\t\t\t\t\tversion: 0\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\tisSupported: function() {\n\t\t\t\t\n\t\t\t\treturn this.supportsFlexbox()\n\t\t\t\t\t&& this.supportsGrid();\n\t\t\t\t\n\t\t\t\tvar browser = this.getBrowser();\n\t\t\t\t\n\t\t\t\tswitch(browser.name) {\n\t\t\t\t\tcase 'edge': return browser.version >= this.supportedVersion.edge;\n\t\t\t\t\tcase 'chrome': return browser.version >= this.supportedVersion.chrome;\n\t\t\t\t\tcase 'firefox': return browser.version >= this.supportedVersion.firefox;\n\t\t\t\t\tcase 'opera': return browser.version >= this.supportedVersion.opera;\n\t\t\t\t\tcase 'safari': return browser.version >= this.supportedVersion.safari;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t\n\t\t\tsupportsGrid: () => {\n\t\t\t\tvar el = document.createElement('div');\n\t\t\t\treturn typeof el.style.grid === 'string';\n\t\t\t},\n\t\t\t\n\t\t\tsupportsFlexbox: () => {\n\t\t\t\tvar el = document.createElement('div');\n\t\t\t\tel.style.display = 'flex';\n\t\t\t\treturn typeof el.style.display === 'string';\n\t\t\t}\n\t\t};\n\t\t\n\t\tfactory._isTouch = factory.isTouch();\n\t\tfactory._isPrecise = factory.isPrecise();\n\t\tfactory._isSupported = factory.isSupported();\n\t\tfactory._browser = factory.getBrowser();\n\t\tfactory._supportsGrid = factory.supportsGrid();\n\t\tfactory._supportsFlexbox = factory.supportsFlexbox();\n\t\t\n\t\treturn factory;\n\t}]);\n})();"]}